<ion-header>
    <ion-toolbar>
        <ion-button slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-button>
        <ion-title>instruments-detail</ion-title>
        <ion-buttons slot="end">
            <ion-button color="primary" (click)="openInsertUpdateInstrumentModal(instrument)">
                Bearbeiten
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" *ngIf="instrument">
    <ion-row>
        <ion-col class="content-col">

            <!-- Thumbnail of the instrument -->
            <ion-thumbnail class="user-image">
                <img alt="Instrument image placeholder"
                     src="https://ionicframework.com/docs/demos/api/avatar/avatar.svg"/>
            </ion-thumbnail>

            <!-- Instrument Title -->
            <ion-text color="dark">
                <h2 class="instrument-name">{{instrument.type_label}}</h2>
            </ion-text>

            <!-- Instrument Details List -->
            <ion-list>
                <ng-container *ngFor="let detail of instrumentDetails">
                    <ion-item *ngIf="instrument[detail.prop]">
                        <!--                        <ion-label position="stacked">{{ detail.label }}</ion-label>-->
                        <ion-input color="primary"
                                   readonly="true"
                                   [value]="getFormattedValue(detail, instrument)"
                                   [label]="detail.label"
                                   label-placement="floating"
                        ></ion-input>
                    </ion-item>
                </ng-container>
            </ion-list>
            <!-- Delete Instrument Button -->
            <ion-button color="primary" expand="block" (click)="openInsertUpdateLoanModal()">Instrument verleihen
            </ion-button>

            <ion-list *ngIf="loans && loans.length">
                <ion-list-header>
                    Loan Registries
                </ion-list-header>
                <ion-item *ngFor="let loan of loans">
                    <!-- Display properties of the loan. Example: -->
                    <ion-text slot="start" [ngStyle]="{ 'color': loan.end_date ? 'primary' : 'green' }">

                        Start Date: {{ loan.start_date | date }}
                        <br>
                        {{ loan.end_date ? 'End Date:' + (loan.end_date | date) : 'Aktiv' }}
                    </ion-text>
                    <ion-text slot="end">
                        {{getMusicianNameFromId(loan.musician_id)}}
                    </ion-text>
                </ion-item>
            </ion-list>

            <!-- Delete Instrument Button -->
            <ion-button color="danger" expand="block" (click)="deleteInstrument(instrument.id)">Instrument lÃ¶schen
            </ion-button>
        </ion-col>
    </ion-row>
</ion-content>

